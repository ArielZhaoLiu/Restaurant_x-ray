<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Events</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
</head>
<body>
<header th:insert="~{nav :: navbar}"></header>
<div class="container">
    <main role="main" class="pb-3">
        <h1>EVENTS</h1>
        <a th:if="${session.loggedIn}" th:href="@{/event/create}">Add Event</a>
        <table class="table" th:unless="${events ==null}">
            <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Price</th>
                <th>Manage</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${event.isArchived() == false}" th:each="event :${events}">

                <td><span th:text="${event.name}"></span></td>
                <td><span th:text="${event.description}"></span></td>
                <td><span th:text="${event.startDate}"></span></td>
                <td><span th:text="${event.endDate}"></span></td>
                <td><span th:text="${event.price}"></span></td>
                <td>
                    <span th:if="${session.loggedIn}">
                    <a th:href="@{/event/detail/{id}(id=${event.id})}">Details</a>
                  | <a th:href="@{/event/edit/{id}(id=${event.id})}">Edit</a>
                    | <a th:href="@{/event/delete/{id}(id=${event.id})}">Delete</a>

                    |   </span>
                    <a th:if="${event.endDate.isAfter(dateNow) or event.endDate.isEqual(dateNow)}" th:href="@{/event/reserve/{id}(id=${event.id})}">Reserve</a>
                    <span th:if="${event.endDate.isBefore(dateNow)}">Past Event</span>
                </td>

            </tr>
            </tbody>
        </table>

        <form th:action="@{/event/filter}" method="post">
            <label class="control-label">Start Date:
                <input type="date" name="startDate" th:value="${startDate}" class="form-control">
            </label>

            <label class="control-label">End Date:
                <input type="date" name="endDate" th:value="${endDate}" class="form-control">
            </label>

            <input type="submit" value="Filter" class="btn btn-primary"/>
        </form>

    </main>
</div>
</body>
</html>