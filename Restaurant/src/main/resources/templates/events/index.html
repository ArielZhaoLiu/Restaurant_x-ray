<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Events</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
</head>
<body>
<header th:insert="~{nav :: navbar}"></header>
<div class="container">
    <main role="main" class="pb-3">
        <h1>EVENTS</h1>
        <a th:if="${session.loggedIn}" th:href="@{/event/create}" class="link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Add Event
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
            </svg>
        </a>

        <table class="table" th:unless="${events ==null}">
            <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Price</th>
                <th>Manage</th>
            </tr>
            </thead>
            <tbody class="table-group-divider">
            <tr th:if="${event.isArchived() == false}" th:each="event :${events}">

                <td><span th:text="${event.name}"></span></td>
                <td><span th:text="${event.description}"></span></td>
                <td><span th:text="${event.startDate}"></span></td>
                <td><span th:text="${event.endDate}"></span></td>
                <td><span th:text="${event.price}"></span></td>
                <td>
                    <span th:if="${session.loggedIn}">
                        <a th:href="@{/event/detail/{id}(id=${event.id})}">Detail</a> |
                        <a th:href="@{/event/edit/{id}(id=${event.id})}">Edit</a> |
                        <a th:href="@{/event/delete/{id}(id=${event.id})}">Delete</a>
                    </span>&nbsp;
                    <a th:if="${event.endDate.isAfter(dateNow) or event.endDate.isEqual(dateNow)}" th:href="@{/event/reserve/{id}(id=${event.id})}" class="btn btn-success">Reserve</a>
                    <span th:if="${event.endDate.isBefore(dateNow)}">Past Event</span>
                </td>

            </tr>
            </tbody>
        </table>

        <form th:action="@{/event/filter}" method="post">
            <label class="control-label">Start Date:
                <input type="date" name="startDate" th:value="${startDate}" class="form-control">
            </label>

            <label class="control-label">End Date:
                <input type="date" name="endDate" th:value="${endDate}" class="form-control">
            </label>

            <input type="submit" value="Filter" class="btn btn-primary"/>
        </form>

    </main>
</div>
</body>
</html>